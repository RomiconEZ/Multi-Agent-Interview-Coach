x-logging: &loki-logging
  logging:
    driver: "loki"                           # Docker logging driver Loki (отправка stdout/stderr в Loki)
    options:
      loki-url: "${LOKI_PUSH_URL}"           # URL Loki push endpoint (обычно /loki/api/v1/push)
      loki-tenant-id: "${LOKI_TENANT_ID}"    # Tenant ID (X-Scope-OrgID) для multi-tenancy
      loki-batch-size: "1048576"             # Максимальный размер батча (байты) перед отправкой
      loki-batch-wait: "1s"                  # Максимальное ожидание, чтобы добрать батч до отправки
      loki-retries: "10"                     # Количество попыток при ошибке отправки

services:
  my-service:
    <<: *loki-logging                        # Применение настроек логирования к сервису