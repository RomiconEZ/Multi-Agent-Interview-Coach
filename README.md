# Multi-Agent Interview Coach

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π –ª–æ–≥–∏–∫–æ–π (Observer / Interviewer / Evaluator), FastAPI backend –∏
–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ Gradio. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ LiteLLM proxy (OpenAI-compatible API). –î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á—ë–Ω **–ª–æ–∫–∞–ª—å–Ω—ã–π Langfuse (self-hosted)** –¥–ª—è observability: —Ç—Ä–µ–∫–∏–Ω–≥ –≤—ã–∑–æ–≤–æ–≤ LLM,
—Ç—Ä–µ–π—Å–æ–≤ –∏–Ω—Ç–µ—Ä–≤—å—é, –º–µ—Ç—Ä–∏–∫ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Å—Å–∏–∏.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤—å—é –≤ —á–∞—Ç-—Ñ–æ—Ä–º–∞—Ç–µ.
- –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:
    - –∞–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–≤ —Ç. —á. –¥–µ—Ç–µ–∫—Ü–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π / off-topic / –≤—Å—Ç—Ä–µ—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ / –±–µ—Å—Å–º—ã—Å–ª–∏—Ü—ã),
    - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏,
    - —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∏–¥–±—ç–∫–∞.
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤ (BASIC ‚Üí INTERMEDIATE ‚Üí ADVANCED ‚Üí EXPERT).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–≤—å—é.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –∏–Ω—Ç–µ—Ä–≤—å—é:
    - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –¢–ó,
    - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –º—ã—Å–ª—è–º–∏ –∞–≥–µ–Ω—Ç–æ–≤,
    - –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ —Å–µ—Å—Å–∏–∏ (–≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ª–æ–≥–µ –∏ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–∏–¥–±—ç–∫–µ –≤ UI).
- Observability —á–µ—Ä–µ–∑ **Langfuse (–ª–æ–∫–∞–ª—å–Ω–æ)**:
    - —Ç—Ä–µ–π—Å—ã –∏–Ω—Ç–µ—Ä–≤—å—é (greeting / user_message / observer_analysis / interviewer_response / final_feedback),
    - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ —Å–µ—Å—Å–∏–∏ –∏ –ø–æ –∞–≥–µ–Ω—Ç–∞–º,
    - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ LLM –æ—à–∏–±–æ–∫ (generation end with error).
- –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (Gradio + FastAPI backend + Redis + Nginx + Langfuse + PostgreSQL).
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` (pydantic-settings).
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (system.log / personal.log).

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ü–µ–Ω–∫–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞.**
  –°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∞—Ç—Ä–∏–±—É—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, –ø–æ–∑–∏—Ü–∏—è, –∑–∞—è–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–µ–π–¥, –æ–ø—ã—Ç, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏) –∏
  —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–Ω—Ç–µ—Ä–≤—å—é –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

- **–£—Ç–æ—á–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.**
  –ï—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∑–∏—Ü–∏—è/—Å—Ç–µ–∫), –∏–Ω—Ç–µ—Ä–≤—å—é –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —ç—Ç–∞–ø–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏
  –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∏–∑–±–µ–≥–∞—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.

- **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**
  –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∫–æ–º–∞–Ω–¥—ã/–Ω–∞–º–µ—Ä–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´—Å—Ç–æ–ø¬ª, ¬´–¥–∞–≤–∞–π —Ñ–∏–¥–±—ç–∫¬ª) –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç
  —Å–µ—Å—Å–∏—é –≤ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—é —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∏–¥–±—ç–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–≥–æ–≤.

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ¬´–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞¬ª –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö —Å–º–µ–Ω—ã —Ç–µ–º—ã.**
  –ü—Ä–∏ —É—Ö–æ–¥–µ –æ—Ç —Ç–µ–º—ã –∏–ª–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö —Å–º–µ–Ω–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —è–∫–æ—Ä—å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∏
  –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∫ –Ω–µ–º—É –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –ª–∏–±–æ —è–≤–Ω–æ–≥–æ ¬´–Ω–µ –∑–Ω–∞—é¬ª.

- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è–º –∑–∞ —Å—á—ë—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–∫—Ç–æ–≤.**
  –ü—Ä–∏ –≤—ã—è–≤–ª–µ–Ω–∏–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä–∫–∏—Ä—É–µ—Ç –∏—Ö –∫–∞–∫ –æ—à–∏–±–∫—É, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–æ–±—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ø—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞–Ω–∏—è—Ö, –Ω–µ –ø–æ–¥–º–µ–Ω—è—è –æ—Ç–≤–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.

- **–î–µ—Ç–µ–∫—Ü–∏—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.**
  –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Å–ª—É—á–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, —Ç–µ—Å—Ç—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —Å–ø–∞–º, –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–≤–æ–¥,
  –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É—è —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å.

- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –º—É—Ç–∞—Ü–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.**
  –ù–µ–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —É—Å–ø–µ—Ö–µ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤. –ü—Ä–∏ —Å–±–æ–µ Interviewer
  –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **UI** (`src/app/ui/gradio_app.py`, `src/app/ui/styles.py`): –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π.
- **InterviewSession** (`src/app/interview/session.py`): –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é, –ª–∏–º–∏—Ç—ã —Ö–æ–¥–æ–≤,
  –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–¥–±—ç–∫–∞, —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ Langfuse.
- **–ê–≥–µ–Ω—Ç—ã** (`src/app/agents/*`): `ObserverAgent`, `InterviewerAgent`, `EvaluatorAgent`.
- **LLMClient** (`src/app/llm/client.py`): HTTP-–∫–ª–∏–µ–Ω—Ç –∫ LiteLLM proxy + —Ç—Ä–µ–∫–∏–Ω–≥ generation –≤ Langfuse.
- **–ü–∞—Ä—Å–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤** (`src/app/llm/response_parser.py`): –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ JSON –∏ reasoning –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ LLM.
- **–£—Ç–∏–ª–∏—Ç–∞ –º–æ–¥–µ–ª–µ–π** (`src/app/llm/models.py`): –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏–∑ LiteLLM API.
- **LangfuseTracker** (`src/app/observability/langfuse_client.py`): —Ç—Ä–µ–∫–∏–Ω–≥ —Ç—Ä–µ–π—Å–æ–≤/–≥–µ–Ω–µ—Ä–∞—Ü–∏–π –∏ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Ç–æ–∫–µ–Ω–æ–≤.
- **FastAPI backend** (`src/app/main.py`, `src/app/core/setup.py`): –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, middleware, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
- **Redis cache** (`src/app/utils/cache.py`): —Ö—Ä–∞–Ω–µ–Ω–∏–µ connection pool –∏ –∫–ª–∏–µ–Ω—Ç–∞.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (`src/app/core/logger_setup.py`): —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —Å TZ, —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è system/personal –ª–æ–≥–æ–≤, —Ä–æ—Ç–∞—Ü–∏—è.

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.
2. **–®–∞–≥ 1** (`add_user_message`, —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, `queue=False`): –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç, –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–≤–æ–¥.
3. **–®–∞–≥ 2** (`bot_respond`, async generator): –≤—ã–∑—ã–≤–∞–µ—Ç `InterviewSession.process_message()`:
    - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π `InterviewTurn`,
    - —Å–æ–∑–¥–∞—ë—Ç span `user_message` –≤ Langfuse,
    - –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `ObserverAgent.process()` –≤–º–µ—Å—Ç–µ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤–æ–ø—Ä–æ—Å–æ–º –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞.
4. `ObserverAgent` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ObserverAnalysis`:
    - —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞ (normal / hallucination / off_topic / question / stop_command / introduction / incomplete / excellent),
    - –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, `is_gibberish`, `answered_last_question`,
    - –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ),
    - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä—É.
5. `InterviewSession` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∞—Ç–æ–º–∞—Ä–Ω–æ):
    - `candidate` (name/grade/tech stack) ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ,
    - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç `current_difficulty` (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–ª—è –æ—Ç–∫–∞—Ç–∞),
    - –ø–∏—à–µ—Ç span'—ã `observer_analysis`, `candidate_info_update`, `difficulty_change`.
6. `InterviewerAgent.process()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –æ—Ç–≤–µ—Ç/–≤–æ–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º—ã—Å–ª–∏.
    - –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –æ—Ç–∫–∞—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—è–∑–Ω—è–µ—Ç—Å—è.
7. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: —Ñ–∏–∫—Å–∞—Ü–∏—è –Ω–µ–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –º—É—Ç–∞—Ü–∏–π (`covered_topics`, `confirmed_skills`, `knowledge_gaps`, —Å—á—ë—Ç—á–∏–∫ —Ö–æ–¥–æ–≤).
8. `InterviewSession` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π `InterviewTurn` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞ –∏ –ø–∏—à–µ—Ç span `interviewer_response`.
9. –ü–æ –∫–æ–º–∞–Ω–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–ª–∏ –ª–∏–º–∏—Ç—É —Ö–æ–¥–æ–≤:
    - `EvaluatorAgent.process()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `InterviewFeedback`,
    - –ø–∏—à–µ—Ç—Å—è span `final_feedback`,
    - –∫ —Ç—Ä–µ–π—Å—É –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (token metrics),
    - —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–≥–∏.

---

## –ê–≥–µ–Ω—Ç—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### BaseAgent

`src/app/agents/base.py`

- –û–±—â–µ–µ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤:
    - `system_prompt` (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ),
    - —Å–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è LLM —á–µ—Ä–µ–∑ `_build_messages()`,
    - —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏ —á–µ—Ä–µ–∑ `_build_job_description_block()`,
    - –µ–¥–∏–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `process(...)`.

### ObserverAgent (–∞–Ω–∞–ª–∏–∑ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞)

`src/app/agents/observer.py`

–ó–∞–¥–∞—á–∏:

- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ç–≤–µ—Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:
    - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç, –Ω–µ–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç,
    - –≤—Å—Ç—Ä–µ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å (role reversal),
    - —É—Ö–æ–¥ –æ—Ç —Ç–µ–º—ã (off-topic),
    - –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è / —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (–ø–æ —Ç–µ–º–µ –∏ –Ω–µ –ø–æ —Ç–µ–º–µ –≤–æ–ø—Ä–æ—Å–∞),
    - –±–µ—Å—Å–º—ã—Å–ª–∏—Ü–∞ (—Ç–µ—Å—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã),
    - –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `answered_last_question` ‚Äî –æ—Ç–≤–µ—Ç–∏–ª –ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å.
- –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞: –∏–º—è, –ø–æ–∑–∏—Ü–∏—è, –≥—Ä–µ–π–¥, –æ–ø—ã—Ç, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.
- –≤—ã–¥–∞—á–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä—É —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏:
    - `ANSWERED=YES|NO`
    - `NEXT_STEP=ASK_NEW|REPEAT|FOLLOWUP`
    - `GIBBERISH_DETECTED=YES|NO`

–ß—Ç–æ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ, –±–µ–∑ —Ç–µ–∫—Å—Ç–∞):

- —Ä–æ–ª—å –∏ –º–∏—Å—Å–∏—è –∞–≥–µ–Ω—Ç–∞,
- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `answered_last_question` –∏ `is_gibberish`,
- –ø—Ä–∞–≤–∏–ª–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∫–∞—á–µ—Å—Ç–≤–∞,
- –ø—Ä–∞–≤–∏–ª–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π –∏ prompt injection,
- –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å—Ç—Ä–µ—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤,
- –ø—Ä–∞–≤–∏–ª–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏,
- —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã.

Retry-–ª–æ–≥–∏–∫–∞: –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–∞ LLM –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ `generation_retries` —Ä–∞–∑.

### InterviewerAgent (–≤–µ–¥–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é)

`src/app/agents/interviewer.py`

–ó–∞–¥–∞—á–∏:

- –≤–µ–¥–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–≤–Ω–æ –æ–¥–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞.
- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (`generate_greeting`) —Å —É—á—ë—Ç–æ–º –Ω–∞–ª–∏—á–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏.
- –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º Observer:
    - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π (–ø–æ —Ç–µ–º–µ ‚Üí –∑–∞–∫—Ä—ã—Ç—å –≤–æ–ø—Ä–æ—Å –∏ –∑–∞–¥–∞—Ç—å –Ω–æ–≤—ã–π; –Ω–µ –ø–æ —Ç–µ–º–µ ‚Üí –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å),
    - –≤–æ–∑–≤—Ä–∞—Ç —Å off-topic,
    - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ—Å—Å–º—ã—Å–ª–∏—Ü—ã,
    - –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤—Å—Ç—Ä–µ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É,
    - —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω–æ–º –æ—Ç–≤–µ—Ç–µ,
    - —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ª–∏—á–Ω–æ–º –æ—Ç–≤–µ—Ç–µ.
- —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –≤–æ–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º.

–ß—Ç–æ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ, –±–µ–∑ —Ç–µ–∫—Å—Ç–∞):

- —Ä–æ–ª—å –∏ —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è,
- –ø—Ä–∞–≤–∏–ª–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Å—Ç–µ–∫—É –∫–∞–Ω–¥–∏–¥–∞—Ç–∞,
- –ø—Ä–∞–≤–∏–ª–∞ ¬´–æ–¥–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞¬ª (—è–∫–æ—Ä—è) —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∑–∞–∫—Ä—ã—Ç–∏—è,
- –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ hallucination/off-topic/question/gibberish,
- –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (prompt injection),
- —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –±–µ–∑ JSON/markdown).

### EvaluatorAgent (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±—ç–∫)

`src/app/agents/evaluator.py`

–ó–∞–¥–∞—á–∏:

- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ `InterviewFeedback` –≤ —Å—Ç—Ä–æ–≥–æ–º JSON-—Ñ–æ—Ä–º–∞—Ç–µ:
    - –≤–µ—Ä–¥–∏–∫—Ç (–≥—Ä–µ–π–¥, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –Ω–∞–π–º—É, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å),
    - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ–±–∑–æ—Ä (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ / –ø—Ä–æ–±–µ–ª—ã),
    - soft skills (—è—Å–Ω–æ—Å—Ç—å, —á–µ—Å—Ç–Ω–æ—Å—Ç—å, –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å),
    - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–æ–∞–¥–º–∞–ø (—Ç–µ–º—ã, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, —Ä–µ—Å—É—Ä—Å—ã),
    - –æ–±—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
- –æ–ø–æ—Ä–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤—å—é (–∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ + —Å–≤–æ–¥–∫–∞ –Ω–∞–≤—ã–∫–æ–≤).

–ß—Ç–æ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ, –±–µ–∑ —Ç–µ–∫—Å—Ç–∞):

- —Ä–æ–ª—å –∏ –º–∏—Å—Å–∏—è –∞–≥–µ–Ω—Ç–∞,
- –∑–∞–ø—Ä–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π –≤ –æ—Ü–µ–Ω–∫–µ (–∫–∞–∂–¥–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–æ —Ä–µ–ø–ª–∏–∫–æ–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞),
- —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–¥–±—ç–∫–∞ –∏ —Å—Ç—Ä–æ–≥–∏–π —Ñ–æ—Ä–º–∞—Ç JSON,
- –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ (–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏, –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å, –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç—å —É—Ä–æ–≤–Ω—è, –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é),
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

Retry-–ª–æ–≥–∏–∫–∞: –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–∞ LLM –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ `generation_retries` —Ä–∞–∑.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ö–ª—é—á–µ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

- `src/app/agents/` ‚Äî –∞–≥–µ–Ω—Ç—ã (Observer/Interviewer/Evaluator) –∏ –æ–±—â–∏–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å.
- `src/app/agents/prompts/` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤.
- `src/app/interview/` ‚Äî —Å–µ—Å—Å–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é.
- `src/app/llm/` ‚Äî LLM –∫–ª–∏–µ–Ω—Ç, –ø–∞—Ä—Å–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤, —É—Ç–∏–ª–∏—Ç–∞ –º–æ–¥–µ–ª–µ–π.
- `src/app/observability/` ‚Äî Langfuse tracker –∏ –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ —Å–µ—Å—Å–∏–∏.
- `src/app/core/` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, setup FastAPI.
- `src/app/ui/` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Å—Ç–∏–ª–∏.
- `src/app/middleware/` ‚Äî middleware (–Ω–∞–ø—Ä–∏–º–µ—Ä client cache).
- `src/app/schemas/` ‚Äî Pydantic –º–æ–¥–µ–ª–∏ –∏–Ω—Ç–µ—Ä–≤—å—é, —Ñ–∏–¥–±—ç–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–≥–µ–Ω—Ç–æ–≤.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11
- Docker / Docker Compose (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- Redis (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ docker-compose)

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

–§–∞–π–ª `.env.example` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è. –û—Å–Ω–æ–≤–Ω—ã–µ:

### LiteLLM (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –ø—Ä–æ–∫—Å–∏)

- `LITELLM_BASE_URL` ‚Äî –±–∞–∑–æ–≤—ã–π URL LiteLLM proxy.
- `LITELLM_API_KEY` ‚Äî –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ LiteLLM.
- `LITELLM_MODEL` ‚Äî –º–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∑–Ω–∞—á–µ–Ω–∏–µ `model_name` –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ LiteLLM).
- `LITELLM_TIMEOUT` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤.
- `LITELLM_MAX_RETRIES` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.
- `LITELLM_RETRY_BACKOFF_BASE` ‚Äî –±–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ backoff.
- `LITELLM_RETRY_BACKOFF_MAX` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ backoff.
- `LITELLM_MODELS_FETCH_TIMEOUT` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

### –ò–Ω—Ç–µ—Ä–≤—å—é

- `INTERVIEW_LOG_DIR` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ –∏–Ω—Ç–µ—Ä–≤—å—é.
- `TEAM_NAME` ‚Äî –∏–º—è –∫–æ–º–∞–Ω–¥—ã.
- `MAX_TURNS` ‚Äî –ª–∏–º–∏—Ç —Ö–æ–¥–æ–≤ –∏–Ω—Ç–µ—Ä–≤—å—é.
- `HISTORY_WINDOW_TURNS` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ö–æ–¥–æ–≤, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM Interviewer.
- `GREETING_MAX_TOKENS` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è.

### Redis

- `REDIS_CACHE_HOST`
- `REDIS_CACHE_PORT`

### Langfuse (self-hosted / –ª–æ–∫–∞–ª—å–Ω–æ)

- `LANGFUSE_ENABLED` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å Langfuse —Ç—Ä–µ–∫–∏–Ω–≥.
- `LANGFUSE_HOST` ‚Äî URL Langfuse –¥–ª—è SDK:
    - –≤ Docker Compose: `http://langfuse:3000`,
    - –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –±–µ–∑ Compose: –æ–±—ã—á–Ω–æ `http://localhost:3000`.
- `LANGFUSE_PUBLIC_KEY`, `LANGFUSE_SECRET_KEY` ‚Äî –∫–ª—é—á–∏ Langfuse (—Å–æ–∑–¥–∞—é—Ç—Å—è –≤ UI: Settings ‚Üí API Keys).
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Langfuse –≤ `docker-compose.yml`:
    - `DATABASE_URL`, `NEXTAUTH_SECRET`, `NEXTAUTH_URL`, `SALT`, `TELEMETRY_ENABLED`.

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- `APP_NAME`, `APP_DESCRIPTION`, `APP_VERSION`, `LICENSE_NAME`, `CONTACT_NAME`, `CONTACT_EMAIL`
- `CLIENT_CACHE_MAX_AGE` ‚Äî max-age –¥–ª—è `Cache-Control`.
- `APP_TZ_OFFSET` ‚Äî —Å–º–µ—â–µ–Ω–∏–µ TZ –¥–ª—è –ª–æ–≥–æ–≤.
- `APP_LOG_DIR` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## LiteLLM —à–ª—é–∑ (llm-gateway-litellm)

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —à–ª—é–∑ **LiteLLM** –¥–ª—è OpenAI-compatible API –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –±—ç–∫–µ–Ω–¥–∞–º (–ª–æ–∫–∞–ª—å–Ω—ã–º
–∏ –æ–±–ª–∞—á–Ω—ã–º), —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π –∏ –ª–æ–≥–æ–≤ –≤ PostgreSQL.

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `llm-gateway-litellm/`

### –ß—Ç–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è

- **LiteLLM** (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `litellm`) ‚Äî OpenAI-compatible API + –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ + healthchecks.
- **PostgreSQL** (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `litellm_db`) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π/–Ω–∞—Å—Ç—Ä–æ–µ–∫/–ª–æ–≥–æ–≤ –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º `STORE_MODEL_IN_DB`.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç LiteLLM

```bash
cd llm-gateway-litellm
cp .env.example .env
docker compose up -d
```

–û—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
docker compose down
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è LiteLLM

–§–∞–π–ª `llm-gateway-litellm/.env.example` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π LiteLLM

–§–∞–π–ª `llm-gateway-litellm/config.yaml` –∑–∞–¥–∞—ë—Ç:

- `model_list` ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π (–∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø–æ–ª–µ `model` –∑–∞–ø—Ä–æ—Å–æ–≤).
- `general_settings.store_model_in_db: true` ‚Äî —Ö—Ä–∞–Ω–∏—Ç—å –º–æ–¥–µ–ª–∏ –≤ –ë–î.
- `litellm_settings` ‚Äî —Ç–∞–π–º–∞—É—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤.

### –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Interview Coach –∫ LiteLLM —à–ª—é–∑—É

1. –ü–æ–¥–Ω–∏–º–∏—Ç–µ LiteLLM —à–ª—é–∑ (—Å–º. —à–∞–≥–∏ –≤—ã—à–µ).
2. –í –∫–æ—Ä–Ω–µ–≤–æ–º `.env` –ø—Ä–æ–µ–∫—Ç–∞ —É–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

- `LITELLM_BASE_URL=http://localhost:4000` (–∏–ª–∏ –≤–∞—à `${LITELLM_PORT_EXTERNAL}`)
- `LITELLM_API_KEY=<LITELLM_MASTER_KEY>`
- `LITELLM_MODEL=local_llm` (–∏–ª–∏ `cloud/deepseek-chat`, `cloud/deepseek-coder`, `cloud/deepseek-reasoner`)

---

## –ó–∞–ø—É—Å–∫ –≤ Docker Compose

### 1) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ `.env`

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:

```bash
cp .env.example .env
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –¥–ª—è Langfuse:

- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `LANGFUSE_ENABLED=true`,
- —Å–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á–∏ –≤ Langfuse UI –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `LANGFUSE_PUBLIC_KEY` / `LANGFUSE_SECRET_KEY`.

### 2) –ó–∞–ø—É—Å–∫

```bash
docker compose up --build
```

### 3) –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

- **Gradio UI**: `http://localhost:${GRADIO_PORT}`
- **Nginx** (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç FastAPI backend): `http://localhost:${NGINX_EXTERNAL_PORT}`
- **FastAPI backend**: –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ compose (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `backend`, –ø–æ—Ä—Ç `${BACKEND_PORT}`).
- **Redis**: –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ compose (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `redis_cache`).
- **Langfuse UI**: `http://localhost:${LANGFUSE_PORT:-3000}`
- **Langfuse DB (PostgreSQL)**: –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ compose (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `langfuse-db`).

---

## Langfuse (observability)

### –ß—Ç–æ —Ç—Ä–µ–∫–∞–µ—Ç—Å—è

–í –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω self-hosted Langfuse –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∏ –º–µ—Ç—Ä–∏–∫:

- trace –Ω–∞ –∫–∞–∂–¥—É—é —Å–µ—Å—Å–∏—é –∏–Ω—Ç–µ—Ä–≤—å—é (session_id),
- generation –Ω–∞ –∫–∞–∂–¥—ã–π LLM –≤—ã–∑–æ–≤ (observer/interviewer/evaluator),
- span'—ã –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤:
    - `greeting`, `user_message`, `observer_analysis`, `interviewer_response`, `final_feedback`,
    - `candidate_info_update` (–ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–∞),
    - `difficulty_change` (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∞—Å—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å),
    - `session_token_metrics` (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏).
- score'—ã –Ω–∞ —Ç—Ä–µ–π—Å:
    - `total_tokens`, `total_turns`, `llm_calls`, `avg_tokens_per_turn`,
    - `confidence_score` (–≤–µ—Å: confidence_score/100).

### –ì–¥–µ –≤ –∫–æ–¥–µ

- `src/app/observability/langfuse_client.py` ‚Äî `LangfuseTracker` + `SessionMetrics`.
- `src/app/llm/client.py` ‚Äî —Å–æ–∑–¥–∞—ë—Ç Langfuse generation –Ω–∞ –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ LLM.
- `src/app/interview/session.py` ‚Äî —Å–æ–∑–¥–∞—ë—Ç trace, –¥–æ–±–∞–≤–ª—è–µ—Ç span'—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ –ª–æ–≥.

### –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `LANGFUSE_ENABLED=false`.

–¢–∞–∫–∂–µ —Ç—Ä–µ–∫–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è, –µ—Å–ª–∏ –∫–ª—é—á–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã (—Å–º. –ª–æ–≥–∏ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ß–µ—Ä–µ–∑ Web UI

1. –ù–∞–∂–∞—Ç—å ¬´–ù–∞—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é¬ª.
2. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å—Å—è (–∏–º—è, –ø–æ–∑–∏—Ü–∏—è/—Ä–æ–ª—å, –æ–ø—ã—Ç, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏).
3. –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.
4. –í–≤–µ—Å—Ç–∏ ¬´—Å—Ç–æ–ø¬ª –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∏–¥–±—ç–∫–∞ (–∏–ª–∏ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª).

### –í—ã—Ö–æ–¥–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ `INTERVIEW_LOG_DIR`:

- `interview_log_YYYYMMDD_HHMMSS.json` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –¢–ó.
- `interview_detailed_YYYYMMDD_HHMMSS.json` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –º—ã—Å–ª—è–º–∏.
    - —Å–æ–¥–µ—Ä–∂–∏—Ç `token_metrics` (—Å—É–º–º–∞—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, —Ç–æ–∫–µ–Ω—ã –ø–æ –∞–≥–µ–Ω—Ç–∞–º, —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è).

–í UI –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±—ç–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –±–ª–æ–∫ ¬´üìä –ú–ï–¢–†–ò–ö–ò –°–ï–°–°–ò–ò (–¢–û–ö–ï–ù–´)¬ª.

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤:
    - `system.log` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —Å `log_type=SYSTEM`.
    - `personal.log` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —Å `log_type=PERSONAL` –∏ `ID:<request_id>`.
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å `log_type=EXTERNAL`.
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –≤ TZ, –∑–∞–¥–∞–Ω–Ω–æ–º `APP_TZ_OFFSET`.

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### pre-commit

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç `.pre-commit-config.yaml`:

- —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `black`, `isort`
- –ª–∏–Ω—Ç–∏–Ω–≥: `flake8`
- —Ç–∏–ø—ã: `mypy`
- –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤: yaml/json/toml, trailing whitespace, debug statements –∏ –¥—Ä.

–ó–∞–ø—É—Å–∫:

```bash
pre-commit install
pre-commit run --all-files
```

---

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫.

### –°–∫—Ä–∏–Ω—à–æ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

![chat](assets/ui_chat.png)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤—å—é

![feedback](assets/ui_feedback.png)

### Langfuse ‚Äî Sessions (–º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∏–Ω—Ç–µ—Ä–≤—å—é-—Å–µ—Å—Å–∏—è–º)

![langfuse_sessions](assets/langfuze_session.png)

### Langfuse ‚Äî Generations (–≤—ã–∑–æ–≤—ã LLM –∏ –ø–æ–ª–µ–∑–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)

![langfuse_generations](assets/langfuse_generations.png)

### LiteLLM ‚Äî Usage (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤)

![litellm_usage](assets/litellm_usage.png)