# Multi-Agent Interview Coach

🎯 Система технического интервью с AI-агентами.

## Описание

Multi-Agent Interview Coach — это система из нескольких AI-агентов, которая проводит техническое интервью, имитируя поведение реального рекрутера.

### Архитектура агентов

```
┌─────────────────────────────────────────────────────────────┐
│                      Interview Session                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │  Observer   │───▶│ Interviewer │◀───│  Evaluator  │     │
│  │   Agent     │    │    Agent    │    │    Agent    │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│        │                  │                  │              │
│        │ анализ           │ диалог           │ фидбэк       │
│        ▼                  ▼                  ▼              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                   LLM Client (LiteLLM)               │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Агенты

1. **Observer Agent** — анализирует ответы кандидата:
   - Выявляет галлюцинации и фактические ошибки
   - Распознаёт попытки сменить тему (off-topic)
   - Извлекает информацию о кандидате из ответов
   - Даёт рекомендации Interviewer Agent

2. **Interviewer Agent** — ведёт диалог:
   - Начинает с общего приветствия
   - Задаёт технические вопросы
   - Адаптирует сложность под уровень кандидата
   - Корректно реагирует на галлюцинации
   - Отвечает на встречные вопросы кандидата

3. **Evaluator Agent** — формирует финальный фидбэк:
   - Вердикт (Grade, Hiring Recommendation, Confidence)
   - Анализ Hard Skills (подтверждённые + пробелы с правильными ответами)
   - Анализ Soft Skills (ясность, честность, вовлечённость)
   - Персональный Roadmap развития

## Свойства системы

✅ **Ролевая специализация** — минимум 3 агента с разными ролями  
✅ **Скрытая рефлексия** — внутренний диалог агентов логируется  
✅ **Сохранение контекста** — агент помнит всю историю диалога  
✅ **Адаптивность** — сложность меняется динамически (4 уровня)  
✅ **Устойчивость к вбросам** — распознаёт галлюцинации и off-topic  

## Установка

### Требования
- Python 3.11+
- Poetry
- LiteLLM (для доступа к LLM)

### Локальный запуск

```bash
# Клонирование
git clone <repository>
cd Megaschool

# Установка зависимостей
poetry install

# Настройка окружения
cp .env.example .env
# Отредактируйте .env, указав LITELLM_BASE_URL и LITELLM_API_KEY

# Запуск Gradio интерфейса
poetry run python -m app.gradio_main
```

### Docker

```bash
# Сборка и запуск
docker-compose up --build

# Gradio будет доступен на http://localhost:7860
```

## Использование

1. Откройте http://localhost:7860
2. Нажмите "🚀 Начать интервью"
3. Агент поприветствует вас — представьтесь в ответе:
   - *"Привет. Я Алекс, претендую на позицию Junior Backend Developer. Знаю Python, SQL и Git."*
4. Отвечайте на вопросы
5. Для завершения скажите "стоп" или "давай фидбэк"

## Формат лога (по ТЗ)

Логи сохраняются в `interview_logs/` в формате JSON:

```json
{
  "participant_name": "Алекс",
  "turns": [
    {
      "turn_id": 1,
      "agent_visible_message": "Привет! Расскажи про свой опыт в программировании.",
      "user_message": "Я Алекс, Junior Backend Developer, знаю Python и SQL.",
      "internal_thoughts": "[Observer]: Кандидат представился как Junior. [Interviewer]: Начну с базовых вопросов по Python."
    }
  ],
  "final_feedback": "..."
}
```

## Конфигурация

Основные переменные окружения:

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `LITELLM_BASE_URL` | URL LiteLLM API | `http://localhost:4000` |
| `LITELLM_API_KEY` | API ключ для LiteLLM | (обязательно) |
| `LITELLM_MODEL` | Имя модели | `gpt-4o-mini` |
| `LITELLM_TIMEOUT` | Таймаут запросов (сек) | `120` |
| `MAX_TURNS` | Макс. количество ходов | `20` |

## Структура проекта

```
src/app/
├── agents/                 # AI-агенты
│   ├── base.py            # Базовый класс агента
│   ├── observer.py        # Observer Agent
│   ├── interviewer.py     # Interviewer Agent
│   └── evaluator.py       # Evaluator Agent
├── interview/             # Управление интервью
│   ├── session.py         # Менеджер сессии
│   └── logger.py          # Логгер сессии
├── llm/                   # LLM клиент
│   └── client.py          # LiteLLM клиент
├── schemas/               # Pydantic схемы
│   ├── interview.py       # Схемы интервью
│   └── feedback.py        # Схемы фидбэка
├── ui/                    # Интерфейс
│   └── gradio_app.py      # Gradio приложение
└── gradio_main.py         # Точка входа
```

## Лицензия

Proprietary
